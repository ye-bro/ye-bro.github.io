<!DOCTYPE html><html><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" x="IE=edge"><meta name="viewport" x="width=device-width, initial-scale=1.0"><link rel="shortcut icon" href="./favicon.png"><link rel="stylesheet" href="https://cdn.staticfile.org/font-awesome/4.7.0/css/font-awesome.css"><link rel="stylesheet" href="https://cdn.staticfile.org/twitter-bootstrap/4.3.1/css/bootstrap.min.css"><link rel="stylesheet" href="./style.css"><script src="https://cdn.staticfile.org/jquery/3.2.1/jquery.min.js"></script><script src="https://cdn.staticfile.org/popper.js/1.15.0/umd/popper.min.js"></script><script src="https://cdn.staticfile.org/twitter-bootstrap/4.3.1/js/bootstrap.min.js"></script><script src="https://cdn.staticfile.org/pangu/4.0.7/pangu.min.js"></script><script type="text/x-mathjax-config">MathJax.Hub.Config({tex2jax: {inlineMath: [['$','$'], ['\\(','\\)']]}});</script><script type="text/javascript" src="http://cdn.bootcss.com/mathjax/2.7.0/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script><title>叶bro's Blog</title></head><body>
	<script src="./js/fileSaver.js"></script>
	<script src="https://cdn.bootcdn.net/ajax/libs/showdown/2.0.3/showdown.min.js"></script>
	<script src="./js/template.js"></script>
	<style>
		html,
		body {
			overflow: hidden;
		}
	</style>
	<style>
		::-webkit-scrollbar {
			display: none;
		}
	</style>
	<div class="px-8 pt-6 main">
		<div class="row" id="webs" style="height:100%">
			<div class="col-4">
				<h2>markdown</h2>
				<textarea class="btn btn-mydark text-left w-100" placeholder="在此输入markdown" id="input"
					onkeyup="convert()" style="height:30rem;resize:none;word-wrap:normal!important;overflow:scroll;font-family:Consolas
					"></textarea>
			</div>
			<div class="col-4">
				<h2>html</h2>
				<pre class="btn btn-mydark text-left w-100" id="outputCode" style="height:30rem;overflow-y:scroll">
					</pre>
				<a href="javascript:copyHandle(document.getElementById('outputCode').innerText)"
					style="font-size:1rem">复制</a> <a href="javascript:name()" style="font-size:1rem">保存</a>
				<a href="./index.html">首页</a>
			</div>
			<div class="col col-4">
				<h2>预览</h2>
				<div class="btn btn-mydark text-left w-100" id="output" style="height:30rem;overflow-y:scroll">
				</div>
			</div>
		</div>
	</div>
	<div class="my-btn-1 text-right">注:无法预览mathjax公式<br>&copy; <span id="year"></span> 叶以承</div>
	<script>
		$("#year").html(new Date().getFullYear());
		function convert() {
			var text = $("#input").val();
			var converter = new showdown.Converter();
			var html = converter.makeHtml(text);
			$("#outputCode").text(html);
			$("#output").html(html);
		}
		function copyHandle(x) {
			let copy = (e) => {
				e.preventDefault();
				e.clipboardData.setData('text/plain', x);
				alert('复制成功');
				document.removeEventListener('copy', copy);
			}
			document.addEventListener('copy', copy);
			document.execCommand("Copy");;
		}
		function check(a) {
			if (a == "") {
				alert("文件名不能为空");
				return false;
			}
			for (var i = 0; i < a.length; i++) {
				if (
					a[i] == '/' ||
					a[i] == '\\' ||
					a[i] == ':' ||
					a[i] == '*' ||
					a[i] == '?' ||
					a[i] == '"' ||
					a[i] == '<' ||
					a[i] == '>' ||
					a[i] == '|'
				) {
					alert('文件名不能含有以下字符:/ \ : * ? " < > |');
					return false;
				}
			}
		}
		function name() {
			var name = prompt("另存为");
			while (check(name) == false) {
				var name = prompt("另存为");
			}
			var d = new Date();
			var date = d.getFullYear() + "年" + (d.getMonth() + 1) + "月" + d.getDate() + "日";
			var main = $("#outputCode").text();
			var file1 = new File([t1 + name + t2 + name + t3 + date + t4 + main + t5], name + ".html", { type: "text/plain;charset=utf-8" });
			alert("debug");
			saveAs(file1);
			var file2 = new File([$("#input").val()], name + ".md", { type: "text/plain;charset=utf-8" });
			saveAs(file2);
		}
	</script>
</body>

</html>