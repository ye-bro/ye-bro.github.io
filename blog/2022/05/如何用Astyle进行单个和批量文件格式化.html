<!DOCTYPE html><html><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" x="IE=edge"><meta name="viewport" x="width=device-width, initial-scale=1.0"><link rel="shortcut icon" href="../../../favicon.png"><link rel="stylesheet" href="https://cdn.staticfile.org/font-awesome/4.7.0/css/font-awesome.css"><link rel="stylesheet" href="https://cdn.staticfile.org/twitter-bootstrap/4.3.1/css/bootstrap.min.css"><link rel="stylesheet" href="../../../style.css"><script src="https://cdn.staticfile.org/jquery/3.2.1/jquery.min.js"></script><script src="https://cdn.staticfile.org/popper.js/1.15.0/umd/popper.min.js"></script><script src="https://cdn.staticfile.org/twitter-bootstrap/4.3.1/js/bootstrap.min.js"></script><script src="https://cdn.staticfile.org/pangu/4.0.7/pangu.min.js"></script><script type="text/x-mathjax-config">MathJax.Hub.Config({tex2jax: {inlineMath: [['$','$'], ['\\(','\\)']]}});</script>
<script>MathJax = { tex: { inlineMath: [['$', '$'], ['(', ')']] } };</script><title>如何用Astyle进行单个和批量文件格式化 - 叶bro's Blog</title></head><body><div class="px-9 py-5"><div class="main p-4"><div class="row"><div class="col"><h3 id="helloworld">如何用Astyle进行单个和批量文件格式化</h3><small class="text-third"><i class="fa fa-clock-o"></i> 最后更新于 2022年5月15日</small><hr><h4 id="astyle">安装Astyle</h4>
<p>首先，在命令行里面</p>
<pre><code class="bash language-bash">sudo apt install astyle
</code></pre>
<p>然后安装vscode扩展Astyle</p>
<p><img src="../../../img/2022/05/001.png" alt="" /></p>
<p>注意是这个扩展，不要安装别的，接下来配置快捷键（红圈），我比较喜欢<code>ctrl+shift+i</code>不过你也可以配置成别的</p>
<p><img src="../../../img/2022/06/001.png" alt="" /></p>
<h4 id="astyle-1">配置Astyle</h4>
<p>然后打开<code>settings.json</code>，注意是整个的不是工作区的，在后面加上你的配置。我比较喜欢OIer最常用的java风格代码，配置如下。你也可以直接复制这个json，如果你要自定义风格，只需注释我的<code>--style</code>并且选择你自己的</p>
<pre><code class="json language-json">"astyle.additional_languages": [
    "c",
    "cpp",
    "*.h",
],
"astyle.cmd_options": [
    // 预定义风格
    // "--style=ansi", //ANSI 风格格式和缩进
    // "--style=kr", //Kernighan&amp;Ritchie 风格格式和缩进
    // "--style=linux", //Linux 风格格式和缩进
    // "--style=gnu", //GNU 风格格式和缩进
    "--style=java", //Java 风格格式和缩进
    "--indent=spaces=4", //缩进4个空格
    "--indent-preproc-block",
    "--pad-oper", //操作符两端插入一个空格
    "--pad-header",
    "--unpad-paren",
    "--suffix=none",
    "--align-pointer=name",
    "--lineend=linux",
    "--convert-tabs", //TAB转换为空格
    "--verbose",
    "--delete-empty-lines", //删除多余空行
    // "--pad-paren-in", //括号内部加入空格
    "--unpad-paren", //移除括号两端多余空格
],
// "astyle.executable": "D:\\AStyle\\bin\\AStyle.exe",
"astyle.java.enable": true,
"astyle.objective-c.enable": true,
</code></pre>
<h4 id="astyle-2">批量Astyle</h4>
<p>安装扩展Format files，注意是这个</p>
<p><img src="../../../img/2022/05/003.png" alt="" /></p>
<p>然后在资源管理器里面右键点击你想格式化的文件夹，选择start format files: this folder，然后选择Do it!</p>
<p>耐心等待格式化完成，完成后整个文件夹的都格式化了</p></div><div class="col-3 hidden-md"><div class="py-3" id="flightInfoBox"><h4>目录</h4><p><span id="contents"></span></p><script>var title=$($(".col")[0]).find("h4");var sum='';for (var i = 0; i < title.length; i++) {title[i].id="tit"+i;sum+="<a href='#tit"+(i)+"'>"+title[i].innerHTML+"</a><br>";}$("#contents").html(sum);if(title.length == 0)$("#contents").html("这篇文章很短，无目录");</script></div></div></div></div><div class="my-btn-3"><button class="rounded-pill btn btn-light" onclick="darkmode()"><i class="fa fa-moon-o"></i></button></div><div class="my-btn-2"><button class="rounded-pill btn btn-light" onclick="setTimeout(window.location.href='../../../index.html',500);"><i class="fa fa-home"></i></button></div><div class="my-btn-1"><button class="rounded-pill btn btn-light" onclick="setTimeout(window.location.href='https://github.com/ye-bro',500);"><i class="fa fa-github"></i></button></div><div class="text-center p-5">&copy;<span id="year"></span> 叶以承</div><script>$("#year").html(new Date().getFullYear());pangu.spacingElementByClassName('main');var navH = $("#flightInfoBox").offset().top;$(window).scroll(function(){var scroH = $(this).scrollTop();if(scroH>=navH){$("#flightInfoBox").css({"top":"0","position":"fixed"});}else if(scroH<navH){$("#flightInfoBox").css({"position":"static"});}});function darkmode() {const wasDarkmode = localStorage.getItem('darkmode') === 'true';localStorage.setItem('darkmode', !wasDarkmode);const element = document.body;element.classList.toggle('dark-mode', !wasDarkmode);}window.onload=function() {document.body.classList.toggle('dark-mode', localStorage.getItem('darkmode') === 'true');}</script></body></html>